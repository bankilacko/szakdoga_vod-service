<!-- TOOLBAR SECTION -->
<mat-toolbar color="primary" class="toolbar">
  <!-- Application title -->
  <button mat-icon-button matSuffix>
    <mat-icon class="home" routerLink="/">ondemand_video</mat-icon>
  </button>
  <span class="app-title" routerLink="/">VOD Application</span>
   
  <!-- Nvigation buttons -->
  <span class="nav-buttons">
    <!-- Change color theme button -->
    <button  mat-raised-button class="custom-button" (click)="changeTheme()">
      <p *ngIf="!isDarkTheme">Light Theme</p>
      <mat-icon *ngIf="!isDarkTheme" class="icon sun">wb_sunny</mat-icon>
      <p *ngIf="isDarkTheme">Dark Theme</p>
      <mat-icon *ngIf="isDarkTheme" class="icon moon">nights_stay</mat-icon>
    </button>
    <!-- Login button -->
    <button *ngIf="!isLoggedIn" mat-raised-button class="custom-button" routerLink="/login"><mat-icon class="basic">login</mat-icon>Login</button>
    <!-- Register button -->
    <button *ngIf="!isLoggedIn" mat-raised-button class="custom-button" routerLink="/register"><mat-icon class="basic">person_add</mat-icon>Register</button>
    <!-- Upload button -->
    <button *ngIf="isLoggedIn" mat-raised-button class="custom-button" routerLink="/upload"><mat-icon class="basic">upload</mat-icon>Upload</button>
    <!-- Profile button -->
    <button *ngIf="isLoggedIn" mat-raised-button  class="custom-button"routerLink="/profile"><mat-icon class="basic">person</mat-icon>Profile</button>
    <!-- Log out button -->
    <button *ngIf="isLoggedIn" mat-raised-button  class="custom-button" (click)="logout()"><mat-icon class="basic">logout</mat-icon>Log out</button>
  </span>
</mat-toolbar>

<!-- VIDEO-PLAYER SECTION -->
<mat-card class="video-container">
    <mat-card-header>
      <mat-card-title>{{ videoTitle }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="video-wrapper">
        <!-- Video player -->
        <div class="video-card">
          <video
            #videoPlayer
            controls
            width="100%"
            height="auto">
          </video>
        </div>

        <!-- Quality selector and view count row -->
        <div class="quality-controls-row">
          <!-- Quality selector -->
          <div class="quality-controls" *ngIf="levels.length > 0">
            <span class="quality-label">Quality:</span>
            <div class="quality-buttons">
              <button 
                mat-raised-button 
                [class.active]="selectedLevel === -1"
                (click)="setLevel(-1)">
                Auto
              </button>
              <button 
                mat-raised-button 
                *ngFor="let level of levels" 
                [class.active]="selectedLevel === level.index"
                (click)="setLevel(level.index)">
                {{ level.label }}
              </button>
            </div>
          </div>
          <!-- View count -->
          <div class="view-count-container">
            <mat-icon class="view-count-icon">visibility</mat-icon>
            <span class="view-count-number">{{ videoViewCount }}</span>
          </div>
        </div>

        <!-- Video information -->
        <div class="video-details">
          <div class="detail-row" *ngIf="videoDescription">
            <span class="detail-label">Description:</span>
            <span class="detail-content">{{ videoDescription }}</span>
          </div>

          <div class="detail-row" *ngIf="videoCategory">
            <span class="detail-label">Category:</span>
            <span class="detail-content">{{ videoCategory }}</span>
          </div>

          <div class="detail-row" *ngIf="videoCreatedAt">
            <span class="detail-label">Uploaded at:</span>
            <span class="detail-content">{{ videoCreatedAt | date:'yyyy-MM-dd' }}</span>
          </div>

          <div class="detail-row" *ngIf="videoDuration">
            <span class="detail-label">Duration:</span>
            <span class="detail-content">{{ videoDuration }} minute(s)</span>
          </div>
        </div>

        <!-- COMMENT SECTION -->
        <div class="comments-container" *ngIf="videoId > 0">
          <app-comment-section [videoId]="videoId"></app-comment-section>
        </div>
      </div>
    </mat-card-content>
</mat-card>  